webpackJsonp([2],{1:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),n=function(e){return e&&e.__esModule?e:{default:e}}(s),d={register:function(e,t,r){n.default.request({url:n.default.getServerUrl("/user/register.do"),method:"POST",data:e,success:t,error:r})},checkUsername:function(e,t,r){n.default.request({url:n.default.getServerUrl("/user/check_valid.do"),method:"POST",data:{type:"username",str:e},success:t,error:r})},login:function(e,t,r){n.default.request({url:n.default.getServerUrl("/user/login.do"),method:"POST",data:e,success:t,error:r})},getQuestion:function(e,t,r){n.default.request({url:n.default.getServerUrl("/user/forget_get_question.do"),method:"POST",data:{username:e},success:t,error:r})},checkAnswer:function(e,t,r){n.default.request({url:n.default.getServerUrl("/user/forget_check_answer.do"),method:"POST",data:e,success:t,error:r})},resetPassword:function(e,t,r){n.default.request({url:n.default.getServerUrl("/user/forget_reset_password.do"),method:"POST",data:e,success:t,error:r})},getUserInfo:function(e,t){n.default.request({url:n.default.getServerUrl("/user/get_information.do"),method:"POST",success:e,error:t})},updatePassword:function(e,t,r){n.default.request({url:n.default.getServerUrl("/user/reset_password.do"),method:"POST",data:e,success:t,error:r})},updateUserInfo:function(e,t,r){n.default.request({url:n.default.getServerUrl("/user/update_information.do"),method:"POST",data:e,success:t,error:r})},logout:function(e,t){n.default.request({url:n.default.getServerUrl("/user/logout.do"),method:"POST",success:e,error:t})},checkLogin:function(e,t){n.default.request({url:n.default.getServerUrl("/user/get_user_info.do"),method:"POST",success:e,error:t})}};t.default=d},12:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),n=function(e){return e&&e.__esModule?e:{default:e}}(s),d={getProductList:function(e,t){n.default.request({url:n.default.getServerUrl("/order/get_order_cart_product.do"),success:e,error:t})},createOrder:function(e,t,r){n.default.request({url:n.default.getServerUrl("/order/create.do"),data:e,success:t,error:r})},getOrderList:function(e,t,r){n.default.request({url:n.default.getServerUrl("/order/list.do"),data:e,success:t,error:r})},getOrderDetail:function(e,t,r){n.default.request({url:n.default.getServerUrl("/order/detail.do"),data:{orderNo:e},success:t,error:r})},cancelOrder:function(e,t,r){n.default.request({url:n.default.getServerUrl("/order/cancel.do"),data:{orderNo:e},success:t,error:r})}};t.default=d},17:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),n=function(e){return e&&e.__esModule?e:{default:e}}(s),d={getAddressList:function(e,t){n.default.request({url:n.default.getServerUrl("/shipping/list.do"),success:e,error:t})},save:function(e,t,r){n.default.request({url:n.default.getServerUrl("/shipping/add.do"),data:e,success:t,error:r})},update:function(e,t,r){n.default.request({url:n.default.getServerUrl("/shipping/update.do"),data:e,success:t,error:r})},getAddress:function(e,t,r){n.default.request({url:n.default.getServerUrl("/shipping/select.do"),data:{shippingId:e},success:t,error:r})},deleteAddress:function(e,t,r){n.default.request({url:n.default.getServerUrl("/shipping/del.do"),data:{shippingId:e},success:t,error:r})}};t.default=d},2:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),n=function(e){return e&&e.__esModule?e:{default:e}}(s),d={getCartCount:function(e,t){n.default.request({url:n.default.getServerUrl("/cart/get_cart_product_count.do"),method:"GET",success:e,error:t})},addToCart:function(e,t,r){n.default.request({url:n.default.getServerUrl("/cart/add.do"),method:"GET",data:e,success:t,error:r})},getCartList:function(e,t){n.default.request({url:n.default.getServerUrl("/cart/list.do"),method:"GET",success:e,error:t})},selectProduct:function(e,t,r){n.default.request({url:n.default.getServerUrl("/cart/select.do"),method:"GET",data:{productId:e},success:t,error:r})},unselectProduct:function(e,t,r){n.default.request({url:n.default.getServerUrl("/cart/un_select.do"),method:"GET",data:{productId:e},success:t,error:r})},selectAllProduct:function(e,t){n.default.request({url:n.default.getServerUrl("/cart/select_all.do"),method:"GET",success:e,error:t})},unselectAllProduct:function(e,t){n.default.request({url:n.default.getServerUrl("/cart/un_select_all.do"),method:"GET",success:e,error:t})},updateProduct:function(e,t,r){n.default.request({url:n.default.getServerUrl("/cart/update.do"),data:e,success:t,error:r})},deleteProduct:function(e,t,r){n.default.request({url:n.default.getServerUrl("/cart/delete_product.do"),data:{productIds:e},success:t,error:r})}};t.default=d},3:function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),r(4);var n=r(0),d=s(n),i=r(1),a=s(i),o=r(2),c=s(o),l={init:function(){return this.bindEvent(),this.loadUserInfo(),this.loadCartCount(),this},bindEvent:function(){$(".js-login").click(function(){d.default.doLogin()}),$(".js-register").click(function(){window.location.href="./user-register.html"}),$(".js-logout").click(function(){a.default.logout(function(e){window.location.reload()},function(e){d.default.errorTips(e)})})},loadUserInfo:function(){a.default.checkLogin(function(e){$(".not-login").hide().siblings(".login").show().find(".username").text(e.username)},function(e){})},loadCartCount:function(){c.default.getCartCount(function(e){$(".cart-count").text(e||0)},function(e){$(".cart-count").text(0)})}};t.default=l.init()},4:function(e,t){},5:function(e,t,r){"use strict";r(6);var s=r(0),n=function(e){return e&&e.__esModule?e:{default:e}}(s);({init:function(){this.bindEvent(),this.onload()},onload:function(){var e=n.default.getURLParam("keyword");e&&$("#search-input").val(e)},searchSubmit:function(){var e=$.trim($("#search-input").val());e?window.location.href="./list.html?keyword="+e:n.default.goHome()},bindEvent:function(){var e=this;$("#search-btn").click(function(){e.searchSubmit()}),$("#search-input").keyup(function(t){13===t.keyCode&&e.searchSubmit()})}}).init()},56:function(e,t,r){e.exports=r(57)},57:function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}r(58),r(5),r(3);var n=r(0),d=s(n),i=r(12),a=s(i),o=r(17),c=s(o),l=r(59),u=s(l),f=r(60),v=s(f),p=r(61),h=s(p),m={data:{productListInfo:null,addressListInfo:null,selectAddressId:null},init:function(){this.bindEvent(),this.onload()},bindEvent:function(){var e=this;$(document).on("click",".address-item",function(){$(this).addClass("active").siblings(".address-item").removeClass("active"),e.data.selectAddressId=$(this).data("id")}),$(document).on("click",".order-submit",function(t){var r=e.data.selectAddressId;r?a.default.createOrder({shippingId:r},function(e){window.location.href="./payment.html?orderNumber="+e.orderNo},function(e){d.default.errorTips(e)}):d.default.errorTips("请选择地址后，再提交订单。")}),$(document).on("click",".address-add",function(){h.default.show({isUpdate:!1,onSuccess:function(){e.loadAddressList()}})}),$(document).on("click",".address-update",function(t){t.stopPropagation();var r=$(this).parents(".address-item").data("id");c.default.getAddress(r,function(t){h.default.show({isUpdate:!0,data:t,onSuccess:function(){e.loadAddressList()}})},function(e){d.default.errorTips(e)})}),$(document).on("click",".address-delete",function(t){t.stopPropagation();var r=$(this).parents(".address-item").data("id");window.confirm("确定要删除地址？")&&c.default.deleteAddress(r,function(t){d.default.successTips(t),e.loadAddressList()},function(e){d.default.errorTips(e)})})},onload:function(){this.loadAddressList(),this.loadProductList()},loadAddressList:function(){var e=this;$(".address-con").html('<div class="loading"></div>'),c.default.getAddressList(function(t){e.addressFilter(t),e.data.addressListInfo=t;var r=d.default.renderHTML(v.default,t);$(".address-con").html(r)},function(e){$(".address-con").html("加载地址失败，请重新刷新页面~")})},addressFilter:function(e){if(this.data.selectAddressId)for(var t=!1,r=0,s=e.list.length;r<s;r++)console.log(this.data.selectAddressId),e.list[r].id===this.data.selectAddressId&&(e.list[r].isActive=!0,t=!0),t||(this.data.selectAddressId=null)},loadProductList:function(){var e=this;$(".product-con").html('<div class="loading"></div>'),a.default.getProductList(function(t){e.data.productListInfo=t;var r=d.default.renderHTML(u.default,t);$(".product-con").html(r)},function(e){$(".product-con").html('<p class="err-tip">加载商品清单失败，请重新刷新页面。</p>')})}};$(function(){m.init()})},58:function(e,t){},59:function(e,t){e.exports=' <table class="product-table">\n  <tr>\n    <th class="cell-img">&nbsp;</th>\n    <th class="cell-info">商品描述</th>\n    <th class="cell-price">价格</th>\n    <th class="cell-count">数量</th>\n    <th class="cell-total">小计</th>\n  </tr>\n  \x3c!-- 第1种商品 --\x3e\n  {{#orderItemVoList}}\n  <tr>\n    <td class="cell-img">\n      <a href="./detail.html?productId={{productId}}" target="_blank">\n        <img src="{{imageHost}}{{productImage}}" alt="{{productName}}" class="p-img">\n      </a>\n    </td>\n    <td class="cell-info">\n      <a href="./detail.html?productId={{productId}}" class="link" target="_blank">{{productName}}</a>\n    </td>\n    <td class="cell-price">￥{{currentUnitPrice}}</td>\n    <td class="cell-count">{{quantity}}</td>\n    <td class="cell-total">￥{{totalPrice}}</td>\n  </tr>\n  {{/orderItemVoList}}\n\n</table>\n\x3c!-- 提交 --\x3e\n<div class="submit-con">\n  <span>订单总价:</span>\n  <span class="submit-total">￥{{productTotalPrice}}</span>\n  <span class="btn order-submit">提交订单</span>\n</div>\n'},6:function(e,t){},60:function(e,t){e.exports=' \x3c!-- 地址1 --\x3e\n {{#list}}\n {{#isActive}}\n  <div class="address-item active" data-id="{{id}}">\n {{/isActive}}\n {{^isActive}}\n  <div class="address-item" data-id="{{id}}">\n {{/isActive}}\n  <div class="address-title">{{receiverCity}} {{receiverProvince}}（ {{receiverName}}收）</div>\n  <div class="address-detail">{{receiverAddress}} {{receiverPhone}}</div>\n  <div class="address-opera">\n    <span class="link address-update">编辑</span>\n    <span class="link address-delete"> 删除</span>\n  </div>\n</div>\n {{/list}}\n\n\x3c!-- 新增地址 --\x3e\n<div class="address-add">\n  <div class="address-new">\n    <i class="fa fa-plus"></i>\n    <div class="text">使用新地址</div>\n  </div>\n</div>\n</div>'},61:function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),d=s(n),i=r(62),a=s(i),o=r(17),c=s(o),l=r(63),u=s(l),f={option:{},$modalWrap:$(".modal-wrap"),show:function(e){this.option=e,this.bindEvent(),this.loadModal()},hide:function(){this.$modalWrap.empty()},bindEvent:function(){var e=this;$(document).on("change","#receiver-province",function(){var t=$(this).val();e.loadCities(t)}),$(document).on("click",".address-btn",function(t){t.stopPropagation();var r=e.getReceiverInfo(),s=e.option.isUpdate;!s&&r.state?c.default.save(r.data,function(t){d.default.successTips("添加地址成功"),e.hide(),"function"==typeof e.option.onSuccess&&e.option.onSuccess(t)},function(e){d.default.errorTips(e)}):s&&r.state?c.default.update(r.data,function(t){d.default.successTips("更新地址成功"),e.hide(),"function"==typeof e.option.onSuccess&&e.option.onSuccess(t)},function(e){d.default.errorTips(e)||d.default.errorTips("哪里不对了")}):d.default.errorTips(r.errMsg)}),$(document).on("click",".modal-container",function(e){e.stopPropagation()}),$(document).on("click",".close",function(){e.hide()})},loadModal:function(){var e=d.default.renderHTML(u.default,{isUpdate:this.option.isUpdate,data:this.option.data});this.$modalWrap.html(e),this.loadProvince()},loadProvince:function(){var e=a.default.getProvince()||[],t=this.$modalWrap.find("#receiver-province");t.html(this.getSelectOption(e)),this.option.isUpdate&&this.option.data.receiverProvince&&(t.val(this.option.data.receiverProvince),this.loadCities(this.option.data.receiverProvince))},loadCities:function(e){var t=a.default.getCities(e)||[],r=this.$modalWrap.find("#receiver-city");r.html(this.getSelectOption(t)),this.option.isUpdate&&this.option.data.receiverCity&&r.val(this.option.data.receiverCity)},getSelectOption:function(e){var t='<option value="">请选择</option>',r=!0,s=!1,n=void 0;try{for(var d,i=e[Symbol.iterator]();!(r=(d=i.next()).done);r=!0){var a=d.value;t+="<option value="+a+">"+a+"</option>"}}catch(e){s=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(s)throw n}}return t},getReceiverInfo:function(){var e={receiverName:"",receiverProvince:"",receiverCity:"",receiverAddress:"",receiverZip:"",id:""},t={state:!1,data:null,errMsg:""};return e.receiverName=$.trim(this.$modalWrap.find("#receiver-name").val()),e.receiverProvince=$.trim(this.$modalWrap.find("#receiver-province").val()),e.receiverCity=$.trim(this.$modalWrap.find("#receiver-city").val()),e.receiverAddress=$.trim(this.$modalWrap.find("#receiver-address").val()),e.receiverPhone=$.trim(this.$modalWrap.find("#receiver-phone").val()),e.receiverZip=$.trim(this.$modalWrap.find("#receiver-zip").val()),e.id=$.trim(this.$modalWrap.find("#receiver-id").val()),e.receiverName?e.receiverProvince?e.receiverCity?e.receiverAddress?e.receiverPhone?(t.state=!0,t.data=e):t.errMsg="请输入的11位手机号码":t.errMsg="请输入详细地址":t.errMsg="请选择所在城市":t.errMsg="请选择所在省份":t.errMsg="请输入收件人姓名",t}};t.default=f},62:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={cityInfo:{"北京市":["东城区","西城区","崇文区","宣武区","朝阳区","海淀区","丰台区","石景山区","房山区","通州区","顺义区","昌平区","大兴区","怀柔区","平谷区","门头沟区","密云区","延庆区","其他"],"广东省":["广州","深圳","珠海","汕头","韶关","佛山","江门","湛江","茂名","肇庆","惠州","梅州","汕尾","河源","阳江","清远","东莞","中山","潮州","揭阳","云浮","其他"],"上海市":["黄浦区","卢湾区","徐汇区","长宁区","静安区","普陀区","闸北区","虹口区","杨浦区","宝山区","闵行区","嘉定区","松江区","金山区","青浦区","南汇区","奉贤区","浦东新区","崇明区","其他"],"天津市":["和平区","河东区","河西区","南开区","河北区","红桥区","塘沽区","汉沽区","大港区","东丽区","西青区","北辰区","津南区","武清区","宝坻区","静海县","宁河县","蓟县","其他"],"重庆市":["渝中区","大渡口区","江北区","南岸区","北碚区","渝北区","巴南区","长寿区","双桥区","沙坪坝区","万盛区","万州区","涪陵区","黔江区","永川区","合川区","江津区","九龙坡区","南川区","綦江县","潼南区","荣昌区","璧山区","大足区","铜梁县","梁平县","开县","忠县","城口县","垫江区","武隆县","丰都县","奉节县","云阳县","巫溪县","巫山县","其他"],"辽宁省":["沈阳","大连","鞍山","抚顺","本溪","丹东","锦州","营口","阜新","辽阳","盘锦","铁岭","朝阳","葫芦岛","其他"],"江苏省":["南京","苏州","无锡","常州","镇江","南通","泰州","扬州","盐城","连云港","徐州","淮安","宿州","其他"],"湖北省":["武汉","黄石","十堰","荆州","宜昌","襄樊","鄂州","荆门","孝感","黄冈","咸宁","随州","仙桃","天门","潜江","神农架","其他"],"四川省":["成都","自贡","攀枝花","泸州","德阳","绵阳","广元","遂宁","内江","乐山","南充","眉山","宜宾","广安","达州","雅安","巴中","资阳","其他"],"陕西省":["西安","铜川","宝鸡","咸阳","渭南","延安","汉中","榆林","安康","商洛","其他"],"河北省":["石家庄","唐山","秦皇岛","邯郸","邢台","保定","张家口","承德","沧州","廊坊","衡水","其他"],"山西省":["太原","大同","阳泉","长治","晋城","朔州","晋中","运城","忻州","临汾","吕梁","其他"],"河南省":["郑州","开封","洛阳","平顶山","安阳","鹤壁","新乡","焦作","濮阳","许昌","漯河","三门峡","南阳","商丘","信阳","周口","驻马店","焦作","其他"],"吉林省":["吉林","四平","辽源","通化","白山","松原","白城","延边朝鲜自治区","其他"],"黑龙江":["哈尔滨","齐齐哈尔","鹤岗","双鸭山","鸡西","大庆","伊春","牡丹江","佳木斯","七台河","黑河","绥远","大兴安岭地区","其他"],"内蒙古":["呼和浩特","包头","乌海","赤峰","通辽","鄂尔多斯","呼伦贝尔","巴彦淖尔","乌兰察布","锡林郭勒盟","兴安盟","阿拉善盟"],"山东省":["济南","青岛","淄博","枣庄","东营","烟台","潍坊","济宁","泰安","威海","日照","莱芜","临沂","德州","聊城","滨州","菏泽","其他"],"安徽省":["合肥","芜湖","蚌埠","淮南","马鞍山","淮北","铜陵","安庆","黄山","滁州","阜阳","宿州","巢湖","六安","亳州","池州","宣城"],"浙江省":["杭州","宁波","温州","嘉兴","湖州","绍兴","金华","衢州","舟山","台州","丽水","其他"],"福建省":["福州","厦门","莆田","三明","泉州","漳州","南平","龙岩","宁德","其他"],"湖南省":["长沙","株洲","湘潭","衡阳","邵阳","岳阳","常德","张家界","益阳","滨州","永州","怀化","娄底","其他"],"广西省":["南宁","柳州","桂林","梧州","北海","防城港","钦州","贵港","玉林","百色","贺州","河池","来宾","崇左","其他"],"江西省":["南昌","景德镇","萍乡","九江","新余","鹰潭","赣州","吉安","宜春","抚州","上饶","其他"],"贵州省":["贵阳","六盘水","遵义","安顺","铜仁","毕节","其他"],"云南省":["昆明","曲靖","玉溪","保山","邵通","丽江","普洱","临沧","其他"],"西藏":["拉萨","那曲地区","昌都地区","林芝地区","山南区","阿里区","日喀则","其他"],"海南省":["海口","三亚","五指山","琼海","儋州","文昌","万宁","东方","澄迈县","定安县","屯昌县","临高县","其他"],"甘肃省":["兰州","嘉峪关","金昌","白银","天水","武威","酒泉","张掖","庆阳","平凉","定西","陇南","临夏","甘南","其他"],"宁夏":["银川","石嘴山","吴忠","固原","中卫","其他"],"青海":["西宁","海东地区","海北藏族自治区","海南藏族自治区","黄南藏族自治区","果洛藏族自治区","玉树藏族自治州","还西藏族自治区","其他"],"新疆":["乌鲁木齐","克拉玛依","吐鲁番地区","哈密地区","和田地区","阿克苏地区","喀什地区","克孜勒苏柯尔克孜","巴音郭楞蒙古自治区","昌吉回族自治州","博尔塔拉蒙古自治区","石河子","阿拉尔","图木舒克","五家渠","伊犁哈萨克自治区","其他"]},getProvince:function(){var e=[];for(var t in this.cityInfo)e.push(t);return e},getCities:function(e){return this.cityInfo[e]||[]}};t.default=s},63:function(e,t){e.exports='<div class="modal">\n  \x3c!-- 弹窗容器 --\x3e\n  <div class="modal-container">\n    \x3c!-- 弹窗头 --\x3e\n    <div class="modal-header">\n   \n    {{^isUpdate}}\n      <h1 class="modal-title">新增地址</h1>      \n    {{/isUpdate}}\n     {{#isUpdate}}\n      <h1 class="modal-title">更新地址</h1>\n    {{/isUpdate}}\n      <i class="fa fa-close close"></i>\n    </div>\n    \x3c!-- 弹出体 --\x3e\n    <div class="modal-body">\n      <div class="form">\n        <div class="form-line">\n          <label for="receiver-name" class="label">\n            <span class="require">*</span>收件人姓名：</label>\n          <input type="text" class="formItem" id="receiver-name" placeholder="请输入收件人姓名" value="{{data.receiverName}}">\n        </div>\n        <div class="form-line">\n          <label for="receiver-city" class="label">\n            <span class="require">*</span>所在城市：</label>\n          <select id="receiver-province" class="formItem">\n            <option value="">请选择</option>\n          </select>\n          <select id="receiver-city" class="formItem">\n            <option value="">请选择</option>          \n          </select>\n        </div>\n        <div class="form-line">\n          <label for="receiver-address" class="label">\n            <span class="require">*</span>详细地址：</label>\n          <input type="text" class="formItem" id="receiver-address" placeholder="请精确到门牌号" value="{{data.receiverAddress}}">\n        </div>\n        <div class="form-line">\n          <label for="receiver-phone" class="label">\n            <span class="require">*</span>收件人手机：</label>\n          <input type="text" class="formItem" id="receiver-phone" placeholder="请输入11位手机号" value="{{data.receiverPhone}}">\n        </div>\n        <div class="form-line">\n          <label for="receiver-zip" class="label">邮政编码：</label>\n          <input type="text" class="formItem" id="receiver-zip" placeholder="如：510000" value="{{data.receiverZip}}">\n        </div>\n        <div class="form-line">\n          <input type="hidden" value="{{data.id}}" id="receiver-id"/>\n          <a class="btn address-btn">保存收货地址</a>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n'}},[56]);